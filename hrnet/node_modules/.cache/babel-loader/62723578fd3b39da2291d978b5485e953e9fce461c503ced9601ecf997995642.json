{"ast":null,"code":"import _slicedToArray from\"D:/Users/Aude/Desktop/Openclassrooms/OC_P14/Faites_passer_une_librairie_jQuery_vers_React_Alexandre_Aude/P14_022023/hrnet/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Input}from'../Inputs/TextInput/Input';import{DateInput}from'../Inputs/DateInput/DateInput';import{NumberInput}from'../Inputs/NumberInput/NumberInput';import{Button}from'../Button/Button';import{DropDown}from'../Dropdown/Dropdown';import{Modal}from'../Modal/Modal';import departments from'../../data/departments.json';import states from'../../data/states.json';import styles from'./Form.module.scss';import{useState}from'react';import{useDispatch}from'react-redux';import{Datas}from'./Datas/Datas';import{createLocalStorage}from'../../feature/localStorageReducer';import{renderErrorMessage}from'./Conditions/Conditions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function Form(_ref){var textInputs=_ref.textInputs,dateInputs=_ref.dateInputs,adressInputs=_ref.adressInputs;/* TODO faire en sorte que quand il y a une erreur sur un input n'efface pas leur contenu*/var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formErrors=_useState2[0],setFormErrors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var noEspace=function noEspace(name){return name.replace(/ /g,'');};var dispatch=useDispatch();var handleSubmit=function handleSubmit(e){e.preventDefault();var formData=new FormData(e.target);var errors=renderErrorMessage({FirstName:formData.get('FirstName'),LastName:formData.get('LastName'),DateofBirth:formData.get('DateofBirth'),StartDate:formData.get('StartDate'),Street:formData.get('Street'),City:formData.get('City'),ZipCode:formData.get('ZipCode')});setFormErrors(errors);if(Object.keys(errors).length===0){setShowModal(true);dispatch(createLocalStorage(Datas()));}else{console.log(\"Formulaire non envoyé en raison d'erreurs.\");}};var renderForm=/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{children:textInputs.map(function(name,index){return/*#__PURE__*/_jsxs(\"div\",{className:styles.blocInput,children:[/*#__PURE__*/_jsx(\"label\",{children:name}),/*#__PURE__*/_jsx(Input,{id:noEspace(name),name:noEspace(name),error:formErrors[noEspace(name)]})]},index);})}),/*#__PURE__*/_jsx(\"div\",{children:dateInputs.map(function(name,index){return/*#__PURE__*/_jsxs(\"div\",{className:styles.blocInput,children:[/*#__PURE__*/_jsx(\"label\",{children:name}),/*#__PURE__*/_jsx(DateInput,{id:noEspace(name),name:noEspace(name),error:formErrors[noEspace(name)]})]},index);})}),/*#__PURE__*/_jsxs(\"fieldset\",{className:styles.containerAdressInputs,children:[/*#__PURE__*/_jsx(\"legend\",{className:styles.legend,children:\"Adress\"}),adressInputs.map(function(name,index){return/*#__PURE__*/_jsxs(\"div\",{className:styles.blocInput,children:[/*#__PURE__*/_jsx(\"label\",{children:name}),/*#__PURE__*/_jsx(Input,{id:noEspace(name),name:noEspace(name),error:formErrors[noEspace(name)]})]},index);}),/*#__PURE__*/_jsx(DropDown,{name:'States',options:states.States}),/*#__PURE__*/_jsxs(\"div\",{className:styles.blocInput,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Zip Code\"}),/*#__PURE__*/_jsx(NumberInput,{id:'ZipCode',name:'ZipCode',error:formErrors['ZipCode']})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.dropdownDepartments,children:/*#__PURE__*/_jsx(DropDown,{name:'Department',options:departments.Departments})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",content:\"Save\"})]});return/*#__PURE__*/_jsx(_Fragment,{children:showModal?/*#__PURE__*/_jsxs(_Fragment,{children:[renderForm,/*#__PURE__*/_jsx(Modal,{closeModal:function closeModal(){return setShowModal(false);}})]}):renderForm});}","map":{"version":3,"names":["Input","DateInput","NumberInput","Button","DropDown","Modal","departments","states","styles","useState","useDispatch","Datas","createLocalStorage","renderErrorMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Form","_ref","textInputs","dateInputs","adressInputs","_useState","_useState2","_slicedToArray","formErrors","setFormErrors","_useState3","_useState4","showModal","setShowModal","noEspace","name","replace","dispatch","handleSubmit","e","preventDefault","formData","FormData","target","errors","FirstName","get","LastName","DateofBirth","StartDate","Street","City","ZipCode","Object","keys","length","console","log","renderForm","onSubmit","className","container","children","map","index","blocInput","id","error","containerAdressInputs","legend","options","States","dropdownDepartments","Departments","type","content","closeModal"],"sources":["D:/Users/Aude/Desktop/Openclassrooms/OC_P14/Faites_passer_une_librairie_jQuery_vers_React_Alexandre_Aude/P14_022023/hrnet/src/components/Form/Form.jsx"],"sourcesContent":["import { Input } from '../Inputs/TextInput/Input';\r\nimport { DateInput } from '../Inputs/DateInput/DateInput';\r\nimport { NumberInput } from '../Inputs/NumberInput/NumberInput';\r\nimport { Button } from '../Button/Button';\r\nimport { DropDown } from '../Dropdown/Dropdown';\r\nimport { Modal } from '../Modal/Modal';\r\nimport departments from '../../data/departments.json';\r\nimport states from '../../data/states.json';\r\nimport styles from './Form.module.scss';\r\nimport { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Datas } from './Datas/Datas';\r\nimport { createLocalStorage } from '../../feature/localStorageReducer';\r\nimport { renderErrorMessage } from './Conditions/Conditions';\r\n\r\nexport function Form({ textInputs, dateInputs, adressInputs }) {\r\n  /* TODO faire en sorte que quand il y a une erreur sur un input n'efface pas leur contenu*/\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [showModal, setShowModal] = useState(false);\r\n  const noEspace = (name) => name.replace(/ /g, '');\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);\r\n    const errors = renderErrorMessage({\r\n      FirstName: formData.get('FirstName'),\r\n      LastName: formData.get('LastName'),\r\n      DateofBirth: formData.get('DateofBirth'),\r\n      StartDate: formData.get('StartDate'),\r\n      Street: formData.get('Street'),\r\n      City: formData.get('City'),\r\n      ZipCode: formData.get('ZipCode'),\r\n    });\r\n    setFormErrors(errors);\r\n    if (Object.keys(errors).length === 0) {\r\n      setShowModal(true);\r\n      dispatch(createLocalStorage(Datas()));\r\n    } else {\r\n      console.log(\"Formulaire non envoyé en raison d'erreurs.\");\r\n    }\r\n  };\r\n\r\n  const renderForm = (\r\n    <form onSubmit={handleSubmit} className={styles.container}>\r\n      <div>\r\n        {textInputs.map((name, index) => (\r\n          <div key={index} className={styles.blocInput}>\r\n            <label>{name}</label>\r\n            <Input\r\n              id={noEspace(name)}\r\n              name={noEspace(name)}\r\n              error={formErrors[noEspace(name)]}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div>\r\n        {dateInputs.map((name, index) => (\r\n          <div key={index} className={styles.blocInput}>\r\n            <label>{name}</label>\r\n            <DateInput\r\n              id={noEspace(name)}\r\n              name={noEspace(name)}\r\n              error={formErrors[noEspace(name)]}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <fieldset className={styles.containerAdressInputs}>\r\n        <legend className={styles.legend}>Adress</legend>\r\n        {adressInputs.map((name, index) => (\r\n          <div key={index} className={styles.blocInput}>\r\n            <label>{name}</label>\r\n            <Input\r\n              id={noEspace(name)}\r\n              name={noEspace(name)}\r\n              error={formErrors[noEspace(name)]}\r\n            />\r\n          </div>\r\n        ))}\r\n        <DropDown name={'States'} options={states.States} />\r\n        <div className={styles.blocInput}>\r\n          <label>Zip Code</label>\r\n          <NumberInput\r\n            id={'ZipCode'}\r\n            name={'ZipCode'}\r\n            error={formErrors['ZipCode']}\r\n          />\r\n        </div>\r\n      </fieldset>\r\n      <div className={styles.dropdownDepartments}>\r\n        <DropDown name={'Department'} options={departments.Departments} />\r\n      </div>\r\n      <Button type=\"submit\" content=\"Save\" />\r\n    </form>\r\n  );\r\n  return (\r\n    <>\r\n      {showModal ? (\r\n        <>\r\n          {renderForm}\r\n          <Modal closeModal={() => setShowModal(false)} />\r\n        </>\r\n      ) : (\r\n        renderForm\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}